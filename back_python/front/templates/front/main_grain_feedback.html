<div class="container page" id="feedback" data-page-root="feedback"  ms-controller="feedback">　
  <nav class="navbar navbar-default  navbar-fixed-top">
    <div  class="row navButton">
        <div  class="col-xs-4 text-left icon">
          <a  href="#!/main/grain">
            <i class="glyphicon glyphicon-arrow-left fa-lg active"></i>
          </a>
        </div>
        <div class="col-xs-4 text-center">
            <h4 id="title" class="topNavButton">打卡</h4>
        </div>
        <div class="col-xs-4 text-right">
          <!-- <a href="#!/main/grain/addchild">
            <i class="fa fa-plus fa-2x active"></i>
          </a> -->
        </div>
    </div>
  </nav>
  <div id="childContent"  class="container-fluid childContent" style="height:600px;overflow-y:scroll">
      <ul class="list-group">
        <li  ms-for="(i,item) in @habits"   class="list-group-item">
          <div class="media" style="margin-top:5px">
            <a  href="#" class="media-left">
                <i class="fa fa-bell fa-3x  active"  aria-hidden="true"></i>
            </a>
            <div class="media-body">
                <h3 class="media-heading">
                  <a ms-attr="{href:'#!/main/grain/editchild/'+@item.id}">{? @item.nickname ?}<i  class="fa fa-edit fa-1x"></i></a>
                </h3>
                <br/>
                <p>米仓：
                <p>钱包：
            </div>
            <a  ms-attr="{href:'#!/main/grain/feedback/'+@item.id}" class="media-right media-middle">
                打卡
            </a>
          </div>
        </li>
      </ul>
    </div>
  </div>
  <script>
  $yml.page=$yml.pageBase.New(null,{
    ctor:function(){
      console.log("feedback loaded..."+this.getVmEleName());
      //基类里在pageReady方法里和可以访问成员$vmPage和$router
      //this.$vmPage
      //this.$router
    },
    vmDef:function(){
      return {
        $id:"grain",
        habits:[],
        backClick:function(){
          //$yml.page.$router.pop();
        },
        cleanUp:function(toCleanVm){
          this.habits.clear();
        }
      };
    },
    pageReady:function(){
      var self=this;
      console.log(" feedback pageReady");
      //显示当前家庭的孩子参加活动所涉及的习惯列表
      $yml.ajax('/api/grain/feedback',null,
      　  function(res){
            res.content.data.forEach(function(r){
              $yml.page.$vmPage.familys.push(r)
            });
          }
      );
    }
  });
  </script>
